<html>
<head>
 <title>Animiks - official site</title>
 <meta HTTP-Equiv=Content-Type Content="text/html; charset=Windows-1251">
</head>
<body BgColor=#FFFFFF>

<h1 Align=center>Animiks</h1>

<h3>Download</h3>
<p Align=justify>
<a HRef="http://animiks.narod.ru/animiks.exe">Animiks Version 0.10</a><br>
</p>

<h3>О программе</h3>
<p Align=justify>
Animiks - программа для анимирования скелетных моделей. 
Файлы от игры ХалфЛайф и ей подобных. Типы обрабатоваемых 
файлов - *.smd, декомпилированные *.mdl . 
</p>

<p Align=justify>
Задумывался Animiks 
как дополнение к программе MilkShape, для упрощения анимирования, 
но вполне может использоваться и самостоятельно. В MilkShape 
давольно удобно привязывать скелет к точкам модели, но анимировать, 
работать с фреймами - крайне неудобно.
</p>

<center><img src="animiks02.gif" Border=1></center>


<h3>Как начать ?</h3>
<h5>Загрузка файла</h5>
<p Align=justify>
Выбираем в мнею File->Open (или жмём Ctrl+O). Появляется меню 
открытия файла. Заходим в папку "Trinity" и выбираем в ней файл 
"TRINITYrage.smd". В левой части окна появляется модель Тринити,
в правой части экрана, там где написано "Animation frame", 
появляется единственный имеющийся в этом файле, фрейм анимации. 
А в нижнем правом углу, там где написано "Joints" (Жоинты) 
появляются список суставов ( шарниров скелета ) Тринити.
</p>


<p Align=justify>
Жоинты представлены в виде деревовидного списка. К каждому жоинту 
может крепиться несколько других жоинтов. Если мы вращаем или 
перемещаем какой-либо жоинт, то все прикреплённые к нему жоинты 
вращаются и двигаются вместе с ним. Отображением жоинтов можно 
управлять через три опции в правой верхней части экрана. А именно :
</p>
<ul>
<li>Show model - показывает/прячет модель в левой части экрана.</li>
<li>Show skelet 1 - показывает/прячет скелет в виде разноцветных 
шариков и палок</li>
<li>Show skelet 2 - показывает/прячет второй скелет отображённый 
с помощью белыхк вадратов и линий.</li>
</ul>
<p Align=justify>
Включите галочку Show skelet 1 и кликайте по дереву жоинтов. В результате 
вокруг выбранного жоинта будут появляться оси. Выбирать жоинты можно не 
только из списка, но и просто кликая по разноцветным шарикам правой кнопкой 
мыши. Модель в левой части программы можно вращать левой кнопкой мыши, или 
перемещать правой кнопкой мыши, или изменять её масштаб колёсиком мыши.
Если надо вернуться к исходному виду, нажмите "Ctrl+R" или выберите в меню 
пункту "Options"->"Reset view".
</p>


<h5>Как анимировать</h5>
<p Align=justify>
Обратим наше внимание на окно "Animation frames". Это фреймы ( кадры ) 
нашей анимации. Вернее пока один единственный фрейм. Чтобы его размножить 
жмём на нём правую кнопку мыши и в появившемся меню выбираем пункт 
"Dublikate frame", то есть дублировать фрейм (можно просто нажать 
Ctrl+Insert). В результате у нас в 
появляется ещё один такой-же фрейм. Проделаем эту операцию дважды, чтобы в 
окне появилось три фрейма. Получилась анимация из трёх фреймов 
( кадров ). Но, 
только анимироваться они пока небудут потому, что все одинаковые. 
Изменим средний фрейм. Кликаем на него мышкой, чтобы выбрать. Допустим 
мы хотим проанимировать движение головы Тринити. Для этого выбираем самый 
верхний жоинт модели. Он называется "Bip01 Head". (Выбрать можно кликом мышки 
по соответствующему шарику, или в Joints. Выбранные жоинты подсвечиваются 
осями.)
</p>

<p Align=justify>
Теперь смотрим в верх правой части окна. Туда где написано "Rotation". Здесь 
в трёх окошках, находящихся друг под другом, отображаются углы под 
которыми выбранный жоинт наклонён. Измените его наклон так, чтобы Тринити 
опустила голову вниз. Для этого надо в нижнем окошке увеличить число. Это 
можно сделать кнопками Up, Down, UpPage, DownPage, нажатием мышкой на 
стрелки вверх вниз, вращением колеса мыши, или набором числа от руки.
После этого можно включить галочку "Animate" и посмотреть как Тринити 
кивает.
</p>


<h5>Добавление плавности</h5>
<p Align=justify>
Тринити кивает резко. Потому, что в нашей анимации всего два фрейма. 
Для большей плавности надо добавить несколько промежуточных фреймов. В 
ручную этого делать ненадо. Достаточно выбрать первый фрейм, нажать на 
нём правую кнопку мыши и в появившемся меню выбрать пункт 
"Add middle frames"->"1" ( добавить средние фреймы ). В появившемся 
диалоге "Input speed-up" выберите 0 или нажмите Escape, что равнозначно. 
Это ускорение, оно нам пока не нужно. Подробнее о нём можно прочитать в 
разделе "Диалог speed-up".
</p>

<p Align=justify>
В результате будет добавлен фрейм, который является средним между тем 
который мы выбрали и последующим. Кивок становится более плавным. 
Сделаем тоже самое с фреймом 
где Тринити максимально опустила голову, теперь он у нас по счёту третий. 
Кликаем на него, но теперь в меню выбираем пункт 
"Add middle frames"->"6". Это, чтобы добавить не один промежуточный 
фрейм, а сразу шесть. Чем больше промежуточных фреймов будет добавлено, тем 
более плавным будет движение. Включаем галочку "Animate" и смотрим на более 
палвынй кивок.
</p>

<p Align=justify>
Анимация кивка готова. Её можно сохранить через пункт меню 
"Save animation as ... ". В принципе кивок - это одна из самых простейшая 
анимация, которая только может быть. Рассмотрена, лишь чтобы понять 
принципы анимирования. Сначала создаём несколько ключевых положений скелета, 
потом добавляем к ним промежуточных фреймов. Для создания ключевых положений 
нужен талант скульптора. Реалиситичные пложения создавать давольно сложно.
</p>

<p Align=justify>
Чтобы лучше понять как, что делается, поиграйтесь с кивком, добавляя 
и удаляя "Delete freme" (Shift+Delete) промежуточные фреймы. Помните, что 
после последнего кадра идёт первый, поэтому они должны быть согласованы, 
чтобы небыло скачкнов.
</p>


<h5>Просмотр, загрузка имеющихся анимаций</h5>
<p Align=justify>
Реалистично проанимировать некоторые сложные движения бывает крайне 
трудно, потому солидные фирмы записывают движения с реальных людей. Чтобы 
просмотреть имеющиеся анимации надо переключиться на закладку Preview, 
нажать на кнопку "Choose dir" ( выбор паки ) и выбрать папку в которой 
анимации данной модели лежат. Если 
в выбранной папке анимации есть, то они появятся в списке "Animations". 
Кликайте по ним, и анимации будут показываться на модели. Надо учесть, что 
анимации от одной модели могут не подходить к анимациям от другой модели.
Если выбранная анимация понравилась, то можно нажать на ней правую кнопку 
мыши и в появившемся меню выбрать пункт "Add selected animation" ( добавить 
выбранную анимацию ), и эта анимация будет добавлена к 
"Animations frames" на закладке "Edit", где её можно подредактировать. 
</p>

<p Align=justify>
Когда вы добавляете анимацию через меню "File"->"Add animations" или через 
"Preview", то возникает вопрос "Fix slide ?". Он связан с тем, что 
некоторые модели от ХалфЛайфа могут "убегать", от начальной позиции. И 
чтобы этого убегания избежать, на вопрос нужно ответить положительно. В 
большинстве случаев это не требуется и можно жать Escape.
</p>


<h3>Декомпиляция *.mdl моделей</h3>
<p Align=justify>
Анимации в игре ХалфЛайф содержатся в файлах mdl. Их можно декомпилировать 
в файлы типа *.smd, с которыми работает программа. 
Выбираем в меню "Options"->"mdl-decompiler", и в открывшемся окне 
указываем файл типа *.mdl . В результате файл будет декомпилирован. 
Декомпиляция производится в туже папку, в которой этот файл лежал. 
Декомпилятор взят от программы MilkShape, и если по каким-то 
причинам не работает, то для декомпиляции можно воспользоваться ею.
</p>

<p Align=justify>
Файлы *.smd бывают двух типов. С моделями и с анимациями. Чтобы после 
декомпиляции понять, где, что находится - генерируется файлы типа *.qc. 
Список анимаций в этом файле находится в разделе "sequences" после 
слов "$sequence". А список моделей в разделах "$bodygroup", после слова
"studio"
</p>

<p Align=justify>
А где же в ХалфЛайфе файлы типа *.mdl ? А они запакованы в файлы 
типа *.pak. А извлечь их оттуда может к примеру программа
<a HRef="http://www.dragonunpacker.com/">Dragon UnPACKer</a> 
</p>


<h3>Подробнее об элементах управления</h3>
<h5>Окно фреймов (Animation frames)</h5>
<p Align=justify>
Окно поддерживать Drug and Drop. Фреймы можно перетаскивать мышкой 
вверх и вниз. Можно, например, загрузить анимацию хотьбы и переставить в ней 
фреймы в обратном порядке. Тогда получится хотьба назад. 
</p>

<p Align=justify>
Вверху окна фреймов есть галочка "Multiselect" (мультиселект). Она нужна 
для работы над 
одним и тем же жоинтом, в нескольких фреймах одновременно. когда галочка 
включена, то можно выделить сразу много фреймов, и все вращения и 
перемещения которые вы будете делать, будут относиться ко всем выделенным 
фреймам. Например загрузим анимацию хотьбы. В ней у Тринити руки весят вдоль 
тела. Допусим мы хотим, чтобы у неё правая рука была вытянута вперёд, как бы 
держа оружие. Для этого включаем галочку Мультиселект, выделяем все фреймы 
хотьбы (Ctrl+A), помечаем жоинт "Bip 01 R Arm" и выкручиваем его Rotation 
так, чтобы рука смотрела вперёд. Снимаем галочку Мультиселек, включаем 
анимацию. Теперь во время хотьбы рука Тринити вытянута вперёд.
</p>

<h5>Зачем нужен Pos 0</h5>
<p Align=justify>
В "Pos 0" находятся координаты нулевого жоинта модели в выбранном 
фрейме. Если их изменять, то модель будет двигаться вверх-вниз, влево-вправо,
вперёд-назад. В случае включённого мультиселекта, изменения применяются ко 
всем выделенным фреймам.
</p>

<h5>Мини-undo</h5>
<p Align=justify>
Перед тем как начать вращать или перемещать жоинты, можно сохранить их 
ротацию или позицию в буфер обмена, нажимая на соответствующие кнопки рядом 
с надписями "Rotation" и "Pos 0". А потом при желании восстанавливать, 
вставляя обратно.
</p>

<h5>Закладка Options</h5>
<p Align=justify>
С опциями на закладке Options можно разобраться методом тыка. Думаю они 
интуитивнопонятные. Может опишу поподробнее позже.
</p>

<h5>Диалог Speed-Up</h5>
<p Align=justify>
Появляется диалог Speed-up при добавлении средних фреймов "Add middle frame", 
и при пересчёте промежуточных положений жоинтов "Joint recount" 
(работает только в режиме Мультиселекта). Значение по-умолчанию - 0.
</p>

<p Align=justify>
Speed-Up - ускорение. Это диалог, который позволяет указывать ускорение 
или замедление движений в анимации. Положительные числа соответствуют 
ускорению, отрицательные - замедлению, а ноль - отсутсвию того и другого.
Если, например, анимируется удар, то в начале у бьющей руки скорость 
нулевая, потом она постепенно нарастает, и в момент удара, становится 
максимальной. Чем больше вы зададите число, тем медленнее рука будет 
двигаться в начале, и тем быстрее в конце удара. Если-же, например, 
анимируется получение удара по телу от чего-либо, то наоборот, 
сначала тело движется быстро, а потом постепенно замедляется. Чтобы это 
сэмитировать надо задать в Speed-Up'е отрицательное число. Чем оно будет 
меньше, тем быстрее тело будет двигаться в начале, и тем медленее в конце. 
Таким образом варьирую данный параметр можно получить достаточно 
реалистичное движение.
</p>

<h5>Дельты</h5>
<p Align=justify>
В главном меню есть опции "File"->"Save delta as ..." и "File"->"Add delta". 
Они позволяют сохранять и загружать не абсолютные положения и ротации 
жоинтов скелета, а их смещения относительно его начального положения.
Нужно это для наложения одних анимаций на другие. Например можно 
анимировать отдельно нижние конечности ( то есть ноги ) и отдельно 
торс, голову и руки. А потом накладывать одно на другое. И ведь 
действительно, ноги могут двигаться сами по себе, то есть прыгать, бегать, 
присядать, а в это же самое время руки могут двигаться тоже сами по себе, 
то есть бить, стрелять, перезаряжать, и т. д. Также и голова может двигаться 
сама по себе, так, что тут целое поле для творчества. 
</p>

<p Align=justify>
Допустим мы хотим наложить анимацию хотьбы на описанный выше кивок головы. 
Для этого загрузим бег Тринити из файла "walk.smd", и сохраним его дельту. 
"File"->"Save delta". Запомним, что в файле "walk.smd" - 24 кадра. 
При сохранении к имени файла предлагается приписать текст типа : 
"_delta24f". 24f - как раз обозначает количество фреймов в файле.
Количество фреймов нужно учитывать для согласования анимаций. 
</p>

<p Align=justify>
Удалим все имеющиеся фреймы и загрузим анимацию кивка. 
У нас в ней 10 фреймов. А в хотьбе 24. Чтобы их 
согласовать, надо удлинить кивок до 24 фреймов. Для этого можно либо удалить 
в кивке имеющиеся средние фреймы, и заменить их б<b>о</b>льшим количеством 
новых, либо можно выбрать последний фрейм кивка, и продублировать его 
"Dublicate frame" (Shift+Ins). Полученный 24-кадровый кивок рекомендуется 
сохранить для дальнейших эксперементов. "File"->"Save animation as ..."
</p>

<p Align=justify>
Теперь можно накладывать сверху бег
"File"->"Add delta". Возникнет вопрос: 
"Add only for selected joint and below ?". То есть добавлять ли дельту 
только к выбранному жоинту и всем, которые к нему прикреплены ? 
Отвечаем "нет" или жмём Escape, так как мы добавляем анимацию ко всем 
жоинтам скелета.  Дельта добавлена. Включаем анимацию и смотрим как 
Тринити идёт и кивает.
</p>

<p Align=justify>
А что же всё таки будет, если ответить на вопрос положительно ? Тогда 
анимация из дельты добавиться только к выбранным конечностям.
Например, только к ногам, или только к рукам, или только к одной 
какой-нибудь руке. Например загрузим нашу сохранённую 24-фреймовою 
анимацию кивка. Выберем у неё жоинт "Bip01 L Leg". И добавим дельту, 
ответив теперь на вопрос "Add only for selected joint and below ?" 
положительно. Включаем анимацию и смотрим. Теперь у Тринити правая нога 
неподвижна, а левая "ходит". Выглядит так, как будто Тринити катается на 
скейте.
</p>

<!--
-->

<h3>Ссылки</h3>
<a HRef="http://www.dragonunpacker.com/">Dragon UnPACKer</a> 
- Программа для выдирания моделей из игр.<br>
<a HRef="http://www.milkshape3d.com">MilkShape</a> 
- редактор моделей.<br>
<a HRef="http://www.planetquake.com/polycount/">http://www.planetquake.com/polycount/</a> 
- большое количество моделей. Сайт на английском, требует регистрироваться.


<h3>Обратная связь</h3>
<p Align=justify>
Если замечены ошибки, есть пожелания, или хочется что-то сказать по поводу
программы, то пишите в 
<a HRef="http://www.narod.ru/guestbook/?owner=21855088">Гостевую книгу</a> . 
Не обещаю, что отвечу. Но посмотрю наверняка.
</p>

<p Align=justify>
</p>

<p Align=justify>
</p>

</body>
</html>